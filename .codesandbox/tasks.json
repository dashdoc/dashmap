{
  // These tasks will run in order when initializing your CodeSandbox project.
  "setupTasks": [
    {
      "name": "Install frontend deps",
      "command": "cd frontend && npm install"
    },
    {
      "name": "Install uv",
      "command": "curl -LsSf https://astral.sh/uv/install.sh | sh"
    },
    {
      "name": "Add uv bin",
      "command": "source $HOME/.local/bin/env"
    },
    {
      "name": "Install backend deps",
      "command": "cd backend && /root/.local/bin/uv sync"
    },
    {
      "name": "Run migrations",
      "command": "cd backend && /root/.local/bin/uv run manage.py migrate"
    },
    {
      "name": "Seed db",
      "command": "cd backend && /root/.local/bin/uv run manage.py reset_db --confirm"
    }
  ],

  // These tasks can be run from CodeSandbox. Running one will open a log in the app.
  "tasks": {
    "launchBackend": {
      "name": "Launch backend",
      "command": "cd backend && /root/.local/bin/uv run python manage.py runserver",
      "runAtStart": true,
      "preview": {
        "port": 8000
      }
    },
    "launchFrontend": {
      "name": "Launch frontend",
      "command": "cd frontend && VITE_API_BASE_URL=https://$(hostname)-8000.csb.app/api/ npm run dev",
      "runAtStart": true,
      "preview": {
        "port": 5173
      }
    }
  }
}
